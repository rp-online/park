{% if text is defined and text %}
  {% set words = text|split(' ') %}
  {% set obfuscatedWords = [] %}
  {% for word in words %}
    {% if 'mailto:' in word or '@' in word %}
      {% set parts = word|split('>') %}
      {% set obfuscatedParts = [] %}
      {% for part in parts %}
        {% if 'mailto:' in part or '@' in part %}
          {% set part = part|replace({
            "@": "&#x40;",
            "-": "&#x2d;",
            ".": "&#x2e;",
            "A": "&#x41;",
            "B": "&#x42;",
            "C": "&#x43;",
            "D": "&#x44;",
            "E": "&#x45;",
            "F": "&#x46;",
            "G": "&#x47;",
            "H": "&#x48;",
            "I": "&#x49;",
            "J": "&#x4a;",
            "K": "&#x4b;",
            "L": "&#x4c;",
            "M": "&#x4d;",
            "N": "&#x4e;",
            "O": "&#x4f;",
            "P": "&#x50;",
            "Q": "&#x51;",
            "R": "&#x52;",
            "S": "&#x53;",
            "T": "&#x54;",
            "U": "&#x55;",
            "V": "&#x56;",
            "W": "&#x57;",
            "X": "&#x58;",
            "Y": "&#x59;",
            "Z": "&#x5a;",
            "g": "&#x67;",
            "i": "&#x69;",
            "j": "&#x6a;",
            "k": "&#x6b;",
            "l": "&#x6c;",
            "m": "&#x6d;",
            "n": "&#x6e;",
            "o": "&#x6f;",
            "p": "&#x70;",
            "q": "&#x71;",
            "s": "&#x73;",
            "t": "&#x74;",
            "u": "&#x75;",
            "v": "&#x76;",
            "w": "&#x77;",
            "y": "&#x79;",
            "z": "&#x7a;",
            "À": "&#xc0;",
            "Á": "&#xc1;",
            "Â": "&#xc2;",
            "Ã": "&#xc3;",
            "Ä": "&#xc4;",
            "Å": "&#xc5;",
            "Æ": "&#xc6;",
            "Ç": "&#xc7;",
            "È": "&#xc8;",
            "É": "&#xc9;",
            "Ê": "&#xca;",
            "Ë": "&#xcb;",
            "Ì": "&#xcc;",
            "Í": "&#xcd;",
            "Î": "&#xce;",
            "Ï": "&#xcf;",
            "Ð": "&#xd0;",
            "Ñ": "&#xd1;",
            "Ò": "&#xd2;",
            "Ó": "&#xd3;",
            "Ô": "&#xd4;",
            "Õ": "&#xd5;",
            "Ö": "&#xd6;",
            "×": "&#xd7;",
            "Ø": "&#xd8;",
            "Ù": "&#xd9;",
            "Ú": "&#xda;",
            "Û": "&#xdb;",
            "Ü": "&#xdc;",
            "Ý": "&#xdd;",
            "Þ": "&#xde;",
            "ß": "&#xdf;",
            "à": "&#xe0;",
            "á": "&#xe1;",
            "â": "&#xe2;",
            "ã": "&#xe3;",
            "ä": "&#xe4;",
            "å": "&#xe5;",
            "æ": "&#xe6;",
            "ç": "&#xe7;",
            "è": "&#xe8;",
            "é": "&#xe9;",
            "ê": "&#xea;",
            "ë": "&#xeb;",
            "ì": "&#xec;",
            "í": "&#xed;",
            "î": "&#xee;",
            "ï": "&#xef;",
            "ð": "&#xf0;",
            "ñ": "&#xf1;",
            "ò": "&#xf2;",
            "ó": "&#xf3;",
            "ô": "&#xf4;",
            "õ": "&#xf5;",
            "ö": "&#xf6;",
            "÷": "&#xf7;",
            "ø": "&#xf8;",
            "ù": "&#xf9;",
            "ú": "&#xfa;",
            "û": "&#xfb;",
            "ü": "&#xfc;",
            "ý": "&#xfd;",
            "þ": "&#xfe;",
            "ÿ": "&#xff;"
          }) %}
        {% endif %}
        {% set obfuscatedParts = obfuscatedParts|merge([part]) %}
      {% endfor %}
      {% set word = obfuscatedParts|join('>') %}
    {% endif %}
    {% set obfuscatedWords = obfuscatedWords|merge([word]) %}
  {% endfor %}
  {% set text = obfuscatedWords|join(' ') %}
{% endif %}
{{ text|raw }}
